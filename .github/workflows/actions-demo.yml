on: [push]

jobs:
  build:
    name: Greeting
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v2
    - name: Run a multi-line script
      run: |
        brew install ffmpeg
        ./Recorder

    - name: Take desktop screenshot
      if: ${{ always() }}
      run: |
          cd /Users/runner/Library/Developer/Xcode/DerivedData
          ls -la
          mkdir /Users/runner/Library/Developer/Xcode/DerivedData/DesktopScreenshot
          cd DesktopScreenshot
          screencapture screenshot.jpg
          echo "Check screenshot folder"
          ls -la

    - name: Store build output
      if: ${{ always() }}
      uses: actions/upload-artifact@v2
      with:
        name: screenshot
        path: /Users/runner/Library/Developer/Xcode/DerivedData/DesktopScreenshot
