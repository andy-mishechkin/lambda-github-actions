on: [push]

jobs:
  build:
    name: Greeting
    runs-on: macos-latest
    steps:
    - uses: actions/checkout@v2
    - name: Run a multi-line script
      run: |
        sudo sqlite3 /Library/Application\ Support/com.apple.TCC/TCC.db "select * from access;" | grep kTCCServiceScreenCapture
        echo hello world
        sudo sqlite3 /Library/Application\ Support/com.apple.TCC/TCC.db "select * from access;" | grep kTCCServiceScreenCapture
        ./Recorder

    - name: Take desktop screenshot
      if: ${{ always() }}
      run: |
          screencapture test.jpg
          ls -la

    - name: Store build output
      if: ${{ always() }}
      uses: actions/upload-artifact@v2
      with:
        name: test.jpg
        path: test.jpg
